<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Film Ekle</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase SDK scriptlerini ekliyoruz -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js"></script>

    <script>
        // Firebase yapılandırma ayarları (Sizin sağladığınız firebaseConfig)
        const firebaseConfig = {
            apiKey: "AIzaSyD9MbTqWGXLLYrp4x8nwu9mYx0y_t8dpJA",
            authDomain: "filmler-4a09c.firebaseapp.com",
            projectId: "filmler-4a09c",
            storageBucket: "filmler-4a09c.firebasestorage.app",
            messagingSenderId: "779802018978",
            appId: "1:779802018978:web:03563cf09a7316ae1503fb",
            measurementId: "G-47T9LZNDV4"
        };

        // Firebase uygulamasını başlatıyoruz
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const analytics = firebase.analytics(app);  // Firebase Analytics (isteğe bağlı)
        
        // Kullanıcı girişini kontrol etme fonksiyonu
        function loginUser() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Firebase Authentication ile giriş yapma
            auth.signInWithEmailAndPassword(username, password)
                .then((userCredential) => {
                    // Giriş başarılı
                    const user = userCredential.user;
                    console.log('Giriş başarılı:', user);
                    // Burada başarılı giriş sonrası yapılacak işlemleri ekleyebilirsiniz
                    alert('Giriş başarılı!');
                    // Örneğin, AppSheet iframe'i gösterebiliriz
                    document.getElementById('form-container').style.display = "none";
                    document.getElementById('appsheet-container').style.display = "block";
                })
                .catch((error) => {
                    // Giriş hatası
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.log('Giriş hatası:', errorMessage);
                    alert('Kullanıcı adı veya şifre hatalı!');
                });
        }

        // Formu doğrulama fonksiyonu
        function validateForm(event) {
            event.preventDefault();  // Formun sayfayı yenilemesini engelle
            loginUser();
        }
    </script>

</head>
<body>
    <div class="form-container" id="form-container">
        <h2>Film Ekle</h2>
        <form id="login-form" onsubmit="validateForm(event)">
            <input type="text" id="username" class="input-field" placeholder="Kullanıcı Adı" required><br>
            <input type="password" id="password" class="input-field" placeholder="Şifre" required><br>
            <button type="submit" class="submit-btn">Film Ekle</button>
            <a href="#" class="forgot-password">Favori Karakterinizi mi Unuttunuz?</a>
        </form>
    </div>

    <!-- AppSheet iframe (Başlangıçta gizli) -->
    <div id="appsheet-container" class="appsheet-container" style="display: none;">
        <iframe id="appsheet-iframe" 
                src="https://www.appsheet.com/start/4ae2c219-2ac4-461f-908d-9f29b3f3092e" 
                width="100%" 
                height="100%" 
                frameborder="0" 
                style="border:none;" 
                allowfullscreen
                sandbox="allow-forms allow-scripts allow-same-origin allow-popups">
        </iframe>
    </div>

    <script src="script.js"></script>
</body>
</html>
